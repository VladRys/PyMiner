# Changelog

All notable changes to this project will be documented in this file.

## PyMiner [1.0.2] — 31-01-2026

This release introduces a modular event system that adds randomness, risk, and player choice to the mining loop.

### Key Changes

- **Event System**
    - Added `EventManager` to control random and forced event triggering.
    - Events are triggered based on ``BASIC_EVENT_CHANCE``.
    - Supports weighted random event selection via random.choices.

- **Base Event Architecture**
    - Introduced base `Event` class with a unified lifecycle:
        - UI clear → description → consequence application → result display.
    
    - All effects are applied strictly through `GameStateService`.
        - Example methods: add_money, deduct_money, increase_mining_speed, decrease_mining_speed.

- **Simple Random Events**
    - `TraumaEvent` — randomly decreases mining speed.
    - `LuckyEvent` — grants a random amount of money.
    - `EquipmentFailureEvent` — deducts money for repairs based on current balance.

- **Choice-Based Events**
    - Added `EventWithChoice` abstraction for player-decision events.
    - Input validation (up to 3 attempts).
    - 50/50 chance for good or bad outcomes.
    - Implemented `HelpStrangerEvent`:
        - Choice: help or ignore.
        - Each choice has a pool of positive and negative consequences.

- **Consequence System**
    - Introduced `Consequence` layer to isolate event effects.
    - Implemented concrete consequences:
        - `MoneyGainConsequence`, `MoneyLossConsequenc`e
        - `SpeedGainConsequence`, `SpeedLossConsequenc`e

    - Each consequence is a standalone object with its own description and `apply()` method.

- **UI & Feedback**
    - Separate delays for descriptions and consequences
    (`BASIC_EVENT_PRINT_DELAY`, `CONSQ_EVENT_PRINT_DELAY`).

    - Events are fully interactive and do not break the game loop.

## Notes

- The system is fully extensible: new events are added as new classes without modifying the manager.

- Architecture follows **SRP** and **Open/Closed** principles (new events and consequences can be added without changing existing code).

- Events are seamlessly integrated after the mining action without affecting core game logic.  


## PyMiner [1.0.1] - 27-01-2026

This release focuses on architectural improvements, clearer separation of responsibilities, and better adherence to OOP and SOLID principles. No major gameplay changes were introduced; the update primarily refines the internal structure of the project.

### Key Changes

- **Architecture & SOLID**
    - Introduced a dedicated `GameStateService` layer for all game-related business logic.
    - `GameState` is now a pure state holder without side effects or behavior.
    - Clear separation of concerns between:
        - `Game` — orchestration
        - `GameState` — data
        - `GameStateService` — business rules
        - `UI` — input/output
        - `Action` — gameplay scenarios

- **Action System Refactor**
    - All gameplay logic moved into `Action` classes (`MiningAction`, `InventoryAction`, `UpgradesAction`).
    - Actions now explicitly receive dependencies.
    - Removed direct state mutation from UI and menu logic.

- **State & Save Handling**
    - Centralized save logic via `GameStateService.save_state()`.
    - Automatic save batching implemented in `GameStateService` (periodic autosave).
    - Safer save initialization with fallback defaults on corrupted or missing save files.

- **UI Enhancements**
    - `UI` class handles all input/output and slowprint logic.
    - Menu, inventory, and upgrades display are separated from game logic.

- **Game Loop Improvements**
    - `Game` now acts as a coordinator, not a logic container.
    - Menu handling simplified and delegated to actions.
    - Graceful shutdown with guaranteed state persistence on exit or interruption.

- **Logging**
    - Added structured logging for player sessions and unexpected errors.
    - Game events are now traceable via `game.log`.

### Removed / Deprecated

- Procedural methods in `Game` like `mine`, `show_inventory`, `upgrades` replaced by `Action` classes.
- Direct manipulation of GameState attributes outside service layer discouraged.

### Fixed

- Inventory overflow consistently prevents adding items beyond capacity.
- Save operations are centralized and reliable.
- Mining animation simplified and consistent.
- Upgrades correctly check money and apply changes via service.

### Notes

- Gameplay behavior remains unchanged compared to `1.0.0`.
- This version lays the groundwork for easier testing, future feature expansion, and further decou



## PyMiner [1.0.0] - 25-01-2026

First public release of my PyMiner fork. The project has been refactored from a procedural script into a structured, object-oriented design, providing a foundation for modular development and future feature expansion.

### Key Changes

- **OOP Refactor**
    - Core logic encapsulated in `Game`, `GameState`, and `Saves`.
    - Removed global state and procedural functions.

- **Item System**
    - Items moved to `items` module.
    - Inventory stores `Item` objects, enabling extensible item behavior.
    - Loot generation is dynamic via `loot_generator`.

- **Game Mechanics**
    - Mining animation simplified with looped display.
    - Inventory and upgrades fully integrated with `GameState`.
    - Item prices derived from object properties instead of hardcoded values.

- **Save System**
    - Centralized management using `Saves` class.
    - Consistent load and write operations on exit and updates.

### Removed / Deprecated

- Hardcoded item strings in main code.

- `math.trunc` usage for currency display.

Fixed

- Inventory overflow now prevents mining beyond capacity.
- Save file writes are consistent and reliable.
